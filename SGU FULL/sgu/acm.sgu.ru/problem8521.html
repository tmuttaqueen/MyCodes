                               <html>
<!-- Mirrored from acm.sgu.ru/problem.php?contest=0&problem=343 by HTTrack Website Copier/3.x [XR&CO'2008], Fri, 15 Nov 2013 13:22:41 GMT -->
<head><title> SSU Online Contester :: 343. VaR </title><META http-equiv='content-type' content='text/html; charset=windows-1251'><link rel=stylesheet type=text/css href='http://acm.sgu.ru/texstyle.css'></head><body><div style='line-height:1.3em;'><div align=center><h4>343. VaR</h4></div><div align=center>Time limit per test: 0.5 second(s)<br />Memory limit: 65536
 kilobytes</div><div align=center>input: standard<br />output: standard</div><br/><br /><br />In economics and finance, <img style='vertical-align:text-bottom;position:relative;top:-2px;' src='http://acm.sgu.ru/cache/3bb78327a0443350592bfff86fbbe432.png'/> (VaR) is a measure of how the market value of an asset or of a portfolio of assets is likely to decrease over a certain time period (usually over 1 day or 10 days) under usual conditions. It is typically used by security houses or investment banks to measure the market risk of their asset portfolios (market value at risk), but is actually a very general concept that has broad application. <img style='vertical-align:text-bottom;position:relative;top:-2px;' src='http://acm.sgu.ru/cache/40df972df2ed5daf75596f7ec20368f8.png'/><br /><br />VaR has three parameters. <ul> <li>The time horizon (period) to be analyzed (i. e. the period of time over which one plans to hold the assets in the portfolio&mdash;the "holding period"). The typical holding period is 1 day, although 10 days are used, for example, to compute capital requirements under the European Capital Adequacy Directive (CAD). For some problems, even a holding period of 1 year is appropriate. <li>The confidence level at which the estimate is made. Popular confidence levels are usually 99&#37; and 95&#37;. <li>The unit of the currency which will be used to denominate the value at risk (VaR). </ul><br /><br />In the purposes of this problem we will use the fixed confidence level value of 95&#37; and Berland dollar as a currency unit.<br /><br />The VaR is the maximum amount at risk to be lost from an investment (under 'normal' market conditions) over a given holding period, at a particular confidence level. As such, it is the converse of shortfall probability, in that it represents the amount to be lost with a given probability, rather than the probability of a given amount to be lost.<br /><br />Consider an example of trading portfolio. Its market value in Berland dollars today is known, but its market value tomorrow is not known. The investment bank holding that portfolio might report that its portfolio has a 1-day VaR of &#36;4 million at the 95&#37; confidence level. This implies that (provided usual conditions will prevail over the 1 day) the bank can expect that, with a probability of 95&#37;, the value of its portfolio will decrease by at most &#36;4 million during 1 day, or, in other words, that, with a probability of 5&#37;, the value of its portfolio will decrease by &#36;4 million or more during 1 day.<br /><br />The key thing to note is that the target confidence level (95&#37; in the above example) is the given parameter here; the output from the calculation (&#36;4 million in the above example) is the maximum amount at risk (the <img style='vertical-align:text-bottom;position:relative;top:-2px;' src='http://acm.sgu.ru/cache/3bb78327a0443350592bfff86fbbe432.png'/>) for that confidence level.<br /><br />In the following, <img style='vertical-align:text-bottom;position:relative;top:-2px;' src='http://acm.sgu.ru/cache/38713a8917a892074b732fe2e6987133.png'/> means percentage change in value.<br /><br />A variety of models exist for estimating VaR. Each model has its own set of assumptions, but the most common assumption is that historical market data is our best estimator for future changes. The important assumption of "variance-covariance" model (<img style='vertical-align:text-bottom;position:relative;top:-2px;' src='http://acm.sgu.ru/cache/aab2c39ee8d47b5bd8ee2211b043ff9e.png'/>) is that risk factor returns are always (jointly) normally distributed and that the change in portfolio value is linearly dependent on all risk factor returns. There are also "historical simulation" and "Monte Carlo simulation" models, but here we will touch only the VCV model.<br /><br />In the following, we will take the simple case, where the only risk factor for the portfolio is the value of the assets themselves. The following two assumptions enable to translate the VaR estimation problem into a linear algebraic problem: <li>the portfolio is composed of the assets whose deltas are linear, more exactly: the change in the value of the portfolio is linearly dependent on (i.e. is a linear combination of) all the changes in the values of the assets, so that also the portfolio return is linearly dependent on all the asset returns; <li>the asset returns are jointly normally distributed. <br /><br />The implication of (1) and (2) is that the portfolio return is normally distributed because it always holds that a linear combination of jointly normally distributed variables is itself normally distributed.<br /><br />We will use the following notation: <ul> <li>there are <i>N</i> assets; <li><i>m</i><sub><i>i</i></sub>= expected value of the return on asset <i>i</i>; <li><i>m</i><sub><i>P</i></sub>= expected value of the return on the portfolio; <li><i>s</i><sub><i>i</i></sub>= standard deviation of the return on asset <i>i</i>; <li><i>s</i><sub><i>P</i></sub>= standard deviation of the the return on the portfolio; <li><i>V</i><sub><i>i</i></sub>= initial value of asset <i>i</i> (in currency units); <li><i>V</i><sub><i>P</i></sub>= initial value of the portfolio (in currency units); <li><i>w</i><sub><i>i</i></sub>=V<sub><i>i</i></sub>/V<sub><i>P</i></sub>; <li><i>W</i>= vector of all <i>w</i><sub><i>i</i></sub> (<i>W</i><sup><i>T</i></sup> means transposed); <li><i>S</i>= covariance matrix, i. e. matrix of covariances between all <i>N</i> assets, i. e. an <i>NxN</i> matrix. </ul><br /><br />The covariance between two real-valued random variables <i>X</i> and <i>Y</i>, with expected values <i>E</i>(<i>X</i>) = <i>m</i><sub><i>X</i></sub> and <i>E</i>(<i>Y</i>) = <i>m</i><sub><i>Y</i></sub> is defined as: <i>cov</i>(<i>X</i>, <i>Y</i>) = <i>E</i>((<i>X</i> - <i>m</i><sub><i>X</i></sub>) (<i>Y</i> - <i>m</i><sub><i>Y</i></sub>)), where <i>E</i> is the expected value operator.<br /><br />The calculation goes as follows.<br /><br /><i>m</i><sub><i>P</i></sub> = <i>w</i><sub>1</sub> &middot; <i>m</i><sub>1</sub> + <i>w</i><sub>1</sub> &middot; <i>m</i><sub>1</sub> +...+ <i>w</i><sub><i>N</i></sub> &middot; <i>m</i><sub><i>N</i></sub>,<br /><br /><i>s</i><sub><i>P</i></sub> = (<i>W</i><sup><i>T</i></sup> &middot; <i>S</i> &middot; <i>W</i>)<sup>0.5</sup>.<br /><br />The normality assumption allows us to z-scale the calculated portfolio standard deviation to the appropriate confidence level. So for the 95&#37; confidence level VaR we get: <i>VaR</i> = -<i>V</i><sub><i>P</i></sub> &middot; (<i>m</i><sub><i>P</i></sub> - 1.644854 &middot; <i>s</i><sub><i>P</i></sub>).<br /><br />You will be given historical data of the assets prices and the quantity of each asset in the portfolio. You should calculate the value at risk for that portfolio.<br /><br /><div align = left style='margin-top:1em;'><b>Input</b></div>The first line of the input contains integers <i>T</i> and <i>N</i> (1 &le; <i>T</i> &le; 10<sup>4</sup>; 1 &le; <i>N</i> &le; 10). Second line contains <i>N</i> integers denoting the quantity of each asset in the portfolio. These integers are positive and not exceed 1000.<br /><br />Each of the next <i>T</i>+1 lines contains <i>N</i> positive numbers <i>price</i><sub><i>t</i></sub><sup>(<i>i</i>)</sup> written with 2 digits after the decimal point (0 &le; <i>t</i> &le; <i>T</i>; 1 &le; <i>i</i> &le; <i>N</i>). The first of those lines contains today's market prices (day 0) for one unit of the corresponding asset. Next line corresponds to the previous working day (day 1), and so on. Today's prices should be used to calculate the initial value of assets. The <img style='vertical-align:text-bottom;position:relative;top:-2px;' src='http://acm.sgu.ru/cache/38713a8917a892074b732fe2e6987133.png'/> of asset <i>i</i> on day <i>t</i> equals to (<i>price</i><sub><i>t</i>-1</sub><sup>(<i>i</i>)</sup>-<i>price</i><sub><i>t</i></sub><sup>(<i>i</i>)</sup>)/price<sub><i>t</i></sub><sup>(<i>i</i>)</sup>. Prices are positive and do not exceed 100000.00.<br /><br /><div align = left style='margin-top:1em;'><b>Output</b></div>Print one number, the VaR for the given data. Your answer must be accurate up to 10<sup>-2</sup>.<br /><br /><div align = left style='margin-top:1em;'><b>Example(s)</b></div>
<table cellspacing=0 cellpadding=4
 style='border-collapse:collapse; border: 1px black solid;'>
 <tr >
 <td width=400 valign=top style='border-collapse:collapse; border: 1px black solid;'>
 <pre>sample input</pre>
 </td>
 <td width=400 valign=top style='border-collapse:collapse; border: 1px black solid;'>
 <pre>sample output</pre>
 </td>
 </tr>
 <tr >
 <td width=400 valign=top style='border-collapse:collapse; border: 1px black solid;'>
 <pre>
5 2
200 10
31.11 489.75
31.04 488.04
31.10 497.28
31.15 504.28
31.22 505.00
30.69 501.02
</pre>
 </td>
 <td width=400 valign=top style='border-collapse:collapse; border: 1px black solid;'>
 <pre>
150.89
</pre>
 </td>
 </tr>
</table><br>
<br /><br /> </div><hr><table width=100% cellpadding=0 cellspacing=0 border=0><tr style='background-color : #FFFFFF;'><td align=right><a target=_top href='mailto:acm@cs.sgu.ru'>Online Contester</a> Team &copy; 2002 - 2010. All rights reserved.</td></tr></table></body>
<!-- Mirrored from acm.sgu.ru/problem.php?contest=0&problem=343 by HTTrack Website Copier/3.x [XR&CO'2008], Fri, 15 Nov 2013 13:22:41 GMT -->
</html>