                               <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<!-- Mirrored from acm.sgu.ru/problem.php?contest=0&problem=156 by HTTrack Website Copier/3.x [XR&CO'2008], Fri, 15 Nov 2013 13:15:01 GMT -->
<head>
<title>Saratov State University :: Online Contester</title>
<META content="text/html; charset=windows-1251" http-equiv=Content-Type>
<META NAME="keywords" CONTENT="???">
<META NAME="description" CONTENT="???">
<meta name="google-site-verification" content="YvG5TvZLtlRLnK2EX22Dz815tDU7UKdDeXE_yJQp3cQ" />
<meta name="verify-v1" content="MCzwwWrZt7qOC1A2HZusdjMbXjHR+zXtTCKpx2CRSEU=" />

  <link rel="stylesheet" href="templates.css" type="text/css">
  <link rel="stylesheet" href="js/ui.datepicker.html" type="text/css">
  <script type="text/javascript" language="javascript" src="js/jquery.html"></script>
  <script type="text/javascript" language="javascript" src="js/jquery.example.html"></script>
  <script type="text/javascript" language="javascript" src="js/ui.datepicker-2.html"></script>

  <link rel="stylesheet" href="templates.css" type="text/css">
  <link rel="stylesheet" href="js/ui.datepicker.html" type="text/css">
  <script type="text/javascript" language="javascript" src="js/jquery.html"></script>
  <script type="text/javascript" language="javascript" src="js/jquery.example.html"></script>
  <script type="text/javascript" language="javascript" src="js/ui.datepicker-2.html"></script>
<!--[if IE 6]>
<script type="text/javascript"> 
    /*Load jQuery if not already loaded*/ if(typeof jQuery == 'undefined'){ document.write("<script type=\"text/javascript\"   src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js\"></"+"script>"); var __noconflict = true; } 
    var IE6UPDATE_OPTIONS = {
        icons_path: "http://static.ie6update.com/hosted/ie6update/images/"
    }
</script>
<script type="text/javascript" src="http://static.ie6update.com/hosted/ie6update/ie6update.js"></script>
<![endif]-->
<link rel="stylesheet" href="style-1024.css" type="text/css">
</head>      <body bgcolor=#F3F6F9 style = 'font-size : 9pt;' text=#000000 link=#336699 vlink=#336699 alink=#336699><div align="center">
    <div align=center><h4>156. Strange Graph
</h4></div><div align=center>time limit per test: 0.5 sec.<br>memory limit per test: 65536
 KB</div><div align=center>input: standard input<br>output: standard output</div><br><br><br><div align = left>Let us consider an undirected graph G = &lt;V, E&gt;. We say that two vertices u and v are neighbours if (u, v) in E. In this case we also say that u is a neighbour of v and v is a neighbour of u. Let us denote by N(v) the set of neighbours of v. Recall that the number of neighbours of v is called the degree of this vertex and is denoted by deg v.
<br>We call graph G strange if it is connected and for its every vertex v the following conditions are satisfied:
<br>&nbsp;&nbsp;1. deg v &gt;= 2 (i.e. there are at least two neighbours of v)
<br>&nbsp;&nbsp;2. if deg v = 2 then the two neighbours of v are not connected by an edge
<br>&nbsp;&nbsp;3. if deg v &gt; 2 then there exists u in N(v), such that the following is true:
<br>&nbsp;&nbsp;&nbsp;&nbsp;(a) deg u = 2
<br>&nbsp;&nbsp;&nbsp;&nbsp;(b) any two diRerent vertices w1, w2 in N(v) \ {u} are neighbours, i.e. (w1,w2) in E
<br>You are given some strange graph G. Find a hamiltonian cycle in it, i.e. a cycle that goes through every vertex of G exactly once.
</div><div align = left><br><b>Input</b></div><div align = left>The first line of the input file contains two integer numbers N and M - the number of vertices and edges in G respectively (3 &lt;= N &lt;= 10000, M &lt;= 100000). 2M integer numbers follow - each pair represents vertices connected by the corresponding edge (vertices are numbered from 1 to N). It is guaranteed that each edge occurs exactly once in the input file and that there are no loops (i.e. ends of each edge are distinct).
</div><div align = left><br><b>Output</b></div><div align = left>If there is no hamiltonian cycle in G, print -1 in the first line of the output file. In the other case output N numbers - the sequence of vertices of G as they appear in the hamiltonian cycle found (note that the last vertex must be connected to the first one). If there are several solutions, output any one.
<br>
</div><div align = left><br><b>Sample test(s)</b></div><div align = left><br>Input</div><div align = left><font face='Courier New'></div><div align = left><pre></div><div align = left>Sample input #1
<br>4 4
<br>1 2 2 3 3 4 4 1
<br>
<br>Sample input #2
<br>9 12
<br>1 2 2 3 3 1 1 4 2 5 3 6
<br>4 7 5 8 6 9 7 8 8 9 9 7
</div><div align = left></pre></div><div align = left></font></div><div align = left><br>Output</div><div align = left><font face='Courier New'></div><div align = left><pre></div><div align = left>Sample output #1
<br>1 2 3 4
<br>
<br>Sample output #2
<br>-1
</div><div align = left></pre></div><div align = left></font></div><div align = left><br><b>Note</b></div><div align = left>
<br>You can download pdf version of this task <a href=materials/p155-163.html>here</a>
</div><div align = left><div align = right> <a href = 'submit8c4b.html?problem=156'>[submit]</a> </div></div><div align = left><div align = right> <a href = 'forumadbc.html?contest=0&amp;problem=156'>[forum]</a> </div></div><div align = left><hr></div><table align=left cellspacing=7><tr><td>Author:</td><td>Andrew Stankevich
</td></tr><tr><td>Resource:</td><td>ACM ICPC 2002-2003 NEERC, Northern Subregion
</td></tr><tr><td>Date:</td><td>November, 2002
</td></tr></table><br><br><br><br><br><br><br><br><br><br><br><table width=100% class=tb cellpadding=0 cellspacing=0><tr><td><table width=100% cellspacing=1 ><tr><td bgcolor=#FFFFFF> <table width=100% cellpadding=0 cellspacing=0 border=0><tr style='background-color : #FFFFFF;'><td align=left>Server time: 2013-11-15 16:38:03</td><td align=right><a target=_top href='mailto:acm@sgu.ru'>Online Contester</a> Team &copy; 2002 - 2013. All rights reserved.</td></tr></table></td></tr></table></td></tr></table></div></body>
<!-- Mirrored from acm.sgu.ru/problem.php?contest=0&problem=156 by HTTrack Website Copier/3.x [XR&CO'2008], Fri, 15 Nov 2013 13:15:02 GMT -->
</html> 